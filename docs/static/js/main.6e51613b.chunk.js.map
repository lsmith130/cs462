{"version":3,"sources":["Profile.tsx","Readings.tsx","App.tsx","serviceWorker.js","index.js"],"names":["Profile","_class","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","name","location","number","threshold","loading","error","saving","inherits","createClass","key","value","_componentWillMount","asyncToGenerator","regenerator_default","a","mark","_callee","response","profile","wrap","_context","prev","next","fetch","sent","ok","setState","statusText","console","abrupt","json","stop","_onSubmit","_callee2","e","_this$state","_context2","preventDefault","method","_x","_nameChanged","_callee3","_context3","target","_x2","_numberChanged","_callee4","_context4","_x3","_locationChanged","_callee5","_context5","_x4","_thresholdChanged","_callee6","_context6","_x5","react_default","createElement","rowStyle","display","paddingBottom","labelStyle","width","style","flexDirection","textAlign","onSubmit","type","onChange","nameChanged","locationChanged","numberChanged","thresholdChanged","height","Component","applyDecoratedDescriptor","prototype","bind","getOwnPropertyDescriptor","Readings","Readings_CurrentReading","Readings_ReadingList","CurrentReading","interval","reading","update","window","setInterval","clearInterval","fetchAll","all","temperature","t0","ReadingList","tempReadings","Promise","fetchViolations","fetchNormal","violations","normal","map","timestamp","isViolation","toConsumableArray","sort","b","slice","log","temp","Reading","highlight","_ref3","backgroundColor","App","BrowserRouter","className","alignItems","justifyContent","Link","to","Route","path","component","exact","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6e51613b.chunk.js","sourcesContent":["import React, { Component, ChangeEvent, FormEvent } from 'react';\nimport bind from 'bind-decorator';\n\nexport class Profile extends Component {\n\n  state = {\n    name: \"\",\n    location: \"\",\n    number: \"\",\n    threshold: \"\",\n    loading: true,\n    error: null,\n    saving: false,\n  }\n\n  async componentWillMount() {\n    const response = await fetch(\"http://cs462.umkhandi.com/sky/cloud/3vKrEpPU8QXMPZH8SxhWUW/sensor_profile/profile\");\n    if (!response.ok) {\n      this.setState({\n        error: response.statusText,\n      });\n      console.error(response);\n      return;\n    }\n\n    const profile = await response.json();\n    this.setState({\n      name: profile.name,\n      location: profile.location,\n      number: profile.number,\n      threshold: profile.threshold,\n      loading: false,\n    });\n  }\n \n  @bind\n  async onSubmit(e: FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n\n    this.setState({\n      saving: true,\n    })\n\n    const { name, number, location, threshold } = this.state;\n\n    const response = await fetch(`http://cs462.umkhandi.com/sky/event/Wfdsrm1Z1vXx7VzTT9ii7a/abc/sensor/profile_updated?name=${name}&number=${number}&location=${location}&threshold=${threshold}`, { \n      method: \"POST\",\n    });\n\n    if (!response.ok) {\n      this.setState({\n        error: response.statusText,\n      })\n      return\n    }\n\n    this.setState({\n      saving: false,\n    })\n  }\n\n  @bind\n  async nameChanged(e: ChangeEvent<HTMLInputElement>) {\n    this.setState({ name: e.target.value })\n  }\n\n  @bind\n  async numberChanged(e: ChangeEvent<HTMLInputElement>) {\n    this.setState({ number: e.target.value })\n  }\n\n  @bind\n  async locationChanged(e: ChangeEvent<HTMLInputElement>) {\n    this.setState({ location: e.target.value })\n  }\n\n  @bind\n  async thresholdChanged(e: ChangeEvent<HTMLInputElement>) {\n    this.setState({ threshold: e.target.value })\n  }\n\n  render() {\n\n    if (this.state.loading) {\n      return (\n        <p>Loading...</p>\n      );\n    }\n    if (this.state.error) {\n      return (\n        <p>Failed to load.</p>\n      );\n    }\n\n    const rowStyle = { display: \"flex\", paddingBottom: \"5px\" };\n    const labelStyle = { width: \"200px\" };\n    return (\n      <form style={{display:\"flex\", flexDirection: \"column\", textAlign:\"left\"}} onSubmit={this.onSubmit}>\n        <div style={rowStyle}><label style={labelStyle}>Name: </label> <input type=\"text\" value={this.state.name} onChange={this.nameChanged}></input></div>\n        <div style={rowStyle}><label style={labelStyle}>Location: </label> <input type=\"text\" value={this.state.location} onChange={this.locationChanged}></input></div>\n        <div style={rowStyle}><label style={labelStyle}>Contact Number: </label> <input type=\"text\" value={this.state.number} onChange={this.numberChanged}></input></div>\n        <div style={rowStyle}><label style={labelStyle}>Threshold: </label> <input type=\"number\" value={this.state.threshold} onChange={this.thresholdChanged}></input></div>\n        <div style={{height:\"30px\"}} />\n        <button type=\"submit\" style={{width:\"100px\", height: \"40px\"}}>{this.state.saving ? \"Saving...\" : \"Submit\" }</button>\n      </form>\n    );\n  }\n}","import React, { Component } from 'react';\nimport bind from 'bind-decorator';\n\nexport function Readings() {\n  return (<div>\n    <h1>Lab 5 Portal</h1>\n    <h3>Current Temperature</h3>\n    <CurrentReading />\n    <h3>Latest Readings (Red indicates threshold violation.)</h3>\n    <p>Note that I lowered the threshold for the last few readings so some readings would be violations</p>\n    <ReadingList />\n  </div>);\n}\n\nclass CurrentReading extends Component {\n\n  interval = 0;\n  state = {\n    loading: true,\n    reading: null,\n    error: null,\n  }\n\n  componentWillMount() {\n    this.update();\n    this.interval = window.setInterval(this.update, 10000)\n  }\n  componentWillUnmount() {\n    window.clearInterval(this.interval);\n  }\n\n  @bind\n  async update() {\n    try {\n\n      const all = await fetchAll();\n\n      this.setState({\n        loading: false,\n        reading: all[all.length-1].temperature,\n      });\n    }\n    catch (e) {\n      console.error(e);\n      this.setState({\n        loading: false,\n        error: true,\n      });\n      return;\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <p>Loading...</p>\n      );\n    }\n    if (this.state.error) {\n      return (\n        <p>Failed to load.</p>\n      )\n    }\n    return (\n      <p>{this.state.reading}</p>\n    );\n  }\n}\n\ntype ReadingListState = {\n  loading: boolean\n  reading: object | null\n  error: string | null\n  tempReadings: any[]\n}\n\ntype Reading = {\n  temperature: Number\n  timestamp: String\n  isViolation: Boolean\n}\n\nclass ReadingList extends Component {\n\n  interval = 0\n  state: ReadingListState = {\n    loading: true,\n    reading: null,\n    error: null,\n    tempReadings: [],\n  }\n\n  componentWillMount() {\n    this.update();\n    this.interval = window.setInterval(this.update, 10000)\n  }\n  componentWillUnmount() {\n    window.clearInterval(this.interval);\n  }\n\n  @bind\n  async update() {\n\n    try {\n      let [violations, normal]: [Reading[], Reading[]] = await Promise.all([\n        fetchViolations(),\n        fetchNormal(),\n      ]);\n\n      violations = violations.map(reading => {\n        return {\n          temperature: reading.temperature,\n          timestamp: reading.timestamp,\n          isViolation: true,\n        };\n      });\n      normal = normal.map(reading => {\n        return {\n          temperature: reading.temperature,\n          timestamp: reading.timestamp,\n          isViolation: false,\n        };\n      });\n\n      const tempReadings: Reading[] = [...violations, ...normal]\n        .sort((a, b) => a.timestamp < b.timestamp ? 1 : -1)\n        .slice(0, 100);\n      this.setState({\n        loading: false,\n        tempReadings,\n      })\n    }\n    catch (e) {\n      console.error(e);\n      this.setState({\n        loading: false,\n        error: true,\n      });\n      return;\n    }\n  }\n\n  render() {\n    console.log(\"render\")\n    if (this.state.loading) {\n      return (\n        <p>Loading...</p>\n      );\n    }\n\n    if (this.state.error) {\n      return (\n        <p>Failed to update.</p>\n      )\n    }\n\n    return (\n      <ul>\n        {this.state.tempReadings.map(temp => <Reading\n          key={temp.timestamp}\n          timestamp={temp.timestamp}\n          value={temp.temperature}\n          highlight={temp.isViolation}\n        />)}\n      </ul>\n    );\n  }\n}\n\nfunction Reading({ timestamp, value, highlight }: { timestamp: String, value: String, highlight: Boolean }) {\n  const style = {\n    backgroundColor: highlight ? \"red\" : \"none\",\n  };\n  return <li >\n    {timestamp}: <span style={style}>{value}</span>\n  </li>;\n}\n\nasync function fetchViolations(): Promise<Reading[]> {\n  const response = await fetch(\"http://cs462.umkhandi.com/sky/cloud/3vKrEpPU8QXMPZH8SxhWUW/temperature_store/threshold_violations\");\n  if (!response.ok) {\n    throw response.statusText;\n  }\n  return response.json();\n}\n\nasync function fetchAll(): Promise<Reading[]> {\n  const response = await fetch(\"http://cs462.umkhandi.com/sky/cloud/3vKrEpPU8QXMPZH8SxhWUW/temperature_store/temperatures\");\n  if (!response.ok) {\n    throw response.statusText;\n  }\n  return response.json()\n}\n\nasync function fetchNormal(): Promise<Reading[]> {\n  let response = await fetch(\"http://cs462.umkhandi.com/sky/cloud/3vKrEpPU8QXMPZH8SxhWUW/temperature_store/inrange_temperatures\");\n  if (!response.ok) {\n    throw response.statusText;\n  }\n\n  return response.json();\n}","import React, { Component } from 'react';\nimport './App.css';\nimport { BrowserRouter, Link, Route } from 'react-router-dom';\nimport { Profile } from './Profile';\nimport { Readings } from './Readings';\n\nclass App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <div className=\"App\">\n          <nav style={{display: \"flex\", flexDirection: \"column\", alignItems: \"space-between\", justifyContent: \"center\"}}>\n            <Link to=\"/\">Home</Link>\n            <Link to=\"/profile\">Profile</Link>\n          </nav>\n          <header className=\"App-header\">\n            <Route path=\"/profile\" component={Profile} />\n            <Route exact path=\"/\" component={Readings} />\n            \n          </header>\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}